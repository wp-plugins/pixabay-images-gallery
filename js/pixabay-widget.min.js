// Pixabay Image Gallery Widget v1.0.1
// https://github.com/Pixabay/JavaScript-PixabayWidget
!function(){function e(e){return e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"):""}function t(e){return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}function a(e,t,a,r,n){var i="pxw_callback_"+s;return window[i]=function(o){e(o,t,a,r,n);try{delete window[i]}catch(s){}},s++,i}function r(e,t){for(var a=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector;e;){if(a.bind(e)(t))return e;e=e.parentElement}}function n(e){for(var t="",a=0,r=e.attributes;a<r.length;a++)"data-attrstr"!=r[a].name&&"data-prefilled"!=r[a].name&&(t+=r[a].name+r[a].value);return t}function i(){for(var e=0,t=document.querySelectorAll("."+d.class_name);e<t.length;e++){var r=t[e];if(n(r)!=r.getAttribute("data-attrstr")){r.setAttribute("data-attrstr",n(r));var i=parseInt(r.getAttribute("data-page"))||1,s=parseInt(r.getAttribute("data-per-page"))||d.per_page,l=r.getAttribute("data-search")||"",c=r.getAttribute("data-user")||"";s=s>100?100:s,c&&(l="user:"+c+" "+l);var g=("http:"==window.location.protocol?"http":"https")+"://pixabay.com/api/?username=PixabayWidget&key=2e318db2f775b21a12e5&lang="+(r.getAttribute("data-lang")||d.lang)+"&order="+(r.getAttribute("data-order")||d.order)+"&image_type="+(r.getAttribute("data-image-type")||d.image_type)+"&safesearch="+(r.getAttribute("data-safesearch")||d.safesearch)+"&editors_choice="+(r.getAttribute("data-editors-choice")||d.editors_choice)+"&per_page="+s+"&page="+i+"&q="+encodeURIComponent(l);if(r.getAttribute("data-prefilled"))r.removeAttribute("data-prefilled"),APIResponse(!1,r,i,s,g);else if(g in o)APIResponse(o[g],r,i,s,g);else{var p=document.createElement("script");p.src=g+"&callback="+a(APIResponse,r,i,s,g),document.body.appendChild(p)}}}}var o={},s=0,d={class_name:"pixabay_widget",row_height:170,per_page:20,max_rows:0,truncate:!0,lang:"en",image_type:"all",safesearch:!1,editors_choice:!1,order:"popular",target:"",navpos:"bottom",branding:!0,prev:"◄ PREV",next:"NEXT ►"};if("object"==typeof pixabayWidget)for(var l in pixabayWidget)Object.prototype.hasOwnProperty.call(pixabayWidget,l)&&(d[l]=pixabayWidget[l]);styles="** .noselect { -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; }** a, ** b { color: #4e99c7; text-decoration: none; font-weight: normal; cursor: pointer; transition: .3s; }** a:hover, ** b:hover { opacity: .7; }** a img { border: 0; }** **_nav { clear: both; padding: 3px 7px; font: normal 12px arial, sans-serif; color: #777; }** **_nav span { color: #ddd; cursor: default; }** .branding { float: right; }**.flex_grid { overflow: hidden; }**.flex_grid .item { float: left; margin: 1px; box-sizing: content-box; overflow: hidden; position: relative;  }**.flex_grid .item img { display: block; width: auto; height: 100%; background: #fff; transition: .3s; }**.flex_grid .item img:hover { opacity: .85; }".replace(/\*\*/g,"."+d.class_name);var c=document.createElement("style");c.type="text/css",c.styleSheet?c.styleSheet.cssText=styles:c.appendChild(document.createTextNode(styles)),document.getElementsByTagName("head")[0].appendChild(c);var g=function(){function e(e){function t(e,a,r,n){function i(e){r.maxRows&&g>r.maxRows||r.truncate&&e&&g>1?u[o][0].style.display="none":(u[o][5]&&(u[o][4].setAttribute("src",u[o][5]),u[o][5]=""),u[o][0].style.width=s+"px",u[o][0].style.height=f+"px",u[o][0].style.display="block")}for(var o,s,d,l,c=1,g=1,p=e.clientWidth,u=[],m=0,f=r.rowHeight,h=0;h<a.length;h++)if(u.push(a[h]),m+=a[h][3]+r.margin,m>=p){for(c=p/m,f=Math.ceil(r.rowHeight*c),d=0,o=0;o<u.length;o++)s=Math.ceil(u[o][3]*c),d+=s+r.margin,d>p&&(s-=d-p+1),i();u=[],m=0,g++}for(o=0;o<u.length;o++)s=Math.floor(u[o][3]*c),l=Math.floor(r.rowHeight*c),i(!0);n||p==e.clientWidth||t(e,a,r,!0)}if(document.querySelector){var a={selector:0,container:".item",object:"img",rowHeight:180,maxRows:0,truncate:0};for(var r in e)e.hasOwnProperty(r)&&(a[r]=e[r]);for(var n="object"==typeof a.selector?[a.selector]:document.querySelectorAll(a.selector),i=0;i<n.length;i++){var o=n[i],s=o.querySelectorAll(a.container),d=[],l=(new Date).getTime();if(s.length){var c=window.getComputedStyle?getComputedStyle(s[0],null):s[0].currentStyle;a.margin=(parseInt(c.marginLeft)||0)+(parseInt(c.marginRight)||0)+(parseInt(c.borderLeftWidth)||0)+(parseInt(c.borderRightWidth)||0);for(var g=0;g<s.length;g++){var p=s[g],u=parseInt(p.getAttribute("data-w")),m=parseInt(p.getAttribute("data-h")),f=u*(a.rowHeight/m),h=p.querySelector(a.object);d.push([p,u,m,f,h,h.getAttribute("data-src")])}t(o,d,a);var b=function(){t(o,d,a)};document.addEventListener?(window["flexImages_listener"+l]=b,window.removeEventListener("resize",window["flexImages_listener"+o.getAttribute("data-flex-t")]),delete window["flexImages_listener"+o.getAttribute("data-flex-t")],window.addEventListener("resize",window["flexImages_listener"+l])):o.onresize=b,o.setAttribute("data-flex-t",l)}}}}return e}();!function(){"function"==typeof define&&define.amd?define("flexImages",function(){return g}):"undefined"!=typeof module&&module.exports?module.exports=g:window.flexImages=g}(),APIResponse=function(a,r,n,i,s){var l="",c="",p=parseInt(r.getAttribute("data-row-height"))||d.row_height,u=parseInt(r.getAttribute("data-max-rows"))||d.max_rows,m=r.getAttribute("data-truncate")||d.truncate,f=r.getAttribute("data-target")||d.target,h=r.getAttribute("data-branding")||d.branding,b=r.getAttribute("data-prev")||d.prev,v=r.getAttribute("data-next")||d.next,w=r.getAttribute("data-navpos")||d.navpos;if((30>p||p>180)&&(p=170),"false"==m?m=0:"true"==m&&(m=1),"false"==h?h=0:"true"==h&&(h=1),0!=a){o[s]=a;var x=a.totalHits>i&&b&&v;(x||h)&&(l+='<div class="noselect '+d.class_name+'_nav">',h&&(l+='<div class="branding">Powered by <a href="https://pixabay.com/" target="'+f+'">Pixabay</a></div>'),x&&(l+=n>1?'<b class="'+d.class_name+'_prev">'+b+"&nbsp;</b>":"<span>"+b+"&nbsp;</span>",l+=n*i<a.totalHits?'<b class="'+d.class_name+'_next">&nbsp; '+v+"</b>":"<span>&nbsp; "+v+"</span>"),l+="</div>"),"top"==w&&(c=l);for(var y=0,_=a.hits;y<_.length;y++){var A=_[y].previewWidth,I=_[y].previewHeight,S=_[y].previewURL;p>I-10&&(A*=180/(I+1),I=180,S=S.replace("_150","__180")),c+='<div class="item" data-w="'+A+'" data-h="'+I+'"><a title="'+e(t(_[y].tags))+'" href="'+_[y].pageURL+'" target="'+f+'"><img src="https://pixabay.com/static/img/blank.gif" data-src="'+S+'"></a></div>'}"bottom"==w&&(c+=l),r.innerHTML=c}r.className.indexOf("flex_grid")<0&&(r.className+=" flex_grid"),new g({selector:r,rowHeight:p,maxRows:u,truncate:m})},document.addEventListener?document.addEventListener("click",function(e){var t=0;if(e.target.className==d.class_name+"_prev"?t=-1:e.target.className==d.class_name+"_next"&&(t=1),t){var a=r(e.target,"."+d.class_name),n=(parseInt(a.getAttribute("data-page"))||1)+t;n&&(a.setAttribute("data-page",n),i()),e.preventDefault()}}):(d.prev="",d.next=""),this.initPixabayWidget=i,"loading"!=document.readyState?i():document.addEventListener?document.addEventListener("DOMContentLoaded",i):document.attachEvent("onreadystatechange",function(){"complete"==document.readyState&&i()})}();